!function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function n(e){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=e.apply(n,r);function c(e){t(a,o,i,c,u,"next",e)}function u(e){t(a,o,i,c,u,"throw",e)}c(void 0)}))}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}
/*! (c) Andrea Giammarchi - ISC */()}function d(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p={};try{p.WeakMap=WeakMap}catch(e){p.WeakMap=function(e,t){var n=t.defineProperty,r=t.hasOwnProperty,o=i.prototype;return o.delete=function(e){return this.has(e)&&delete e[this._]},o.get=function(e){return this.has(e)?e[this._]:void 0},o.has=function(e){return r.call(e,this._)},o.set=function(e,t){return n(e,this._,{configurable:!0,value:t}),this},i;function i(t){n(this,"_",{value:"_@ungap/weakmap"+e++}),t&&t.forEach(a,this)}function a(e){this.set(e[0],e[1])}}(Math.random(),Object)}var m=p.WeakMap;
/*! (c) Andrea Giammarchi - ISC */
var g={};try{g.Event=new Event(".").constructor}catch(e){try{g.Event=new CustomEvent(".").constructor}catch(e){g.Event=function(e,t){t||(t={});var n=document.createEvent("Event"),r=!!t.bubbles,o=!!t.cancelable;n.initEvent(e,r,o);try{n.bubbles=r,n.cancelable=o}catch(n){}return n}}}var y=g.Event,b={};
/*! (c) Andrea Giammarchi - ISC */try{b.WeakSet=WeakSet}catch(e){!function(e){var t=new e,n=r.prototype;function r(n){t.set(this,new e),n&&n.forEach(this.add,this)}n.add=function(e){return t.get(this).set(e,1),this},n.delete=function(e){return t.get(this).delete(e)},n.has=function(e){return t.get(this).has(e)},b.WeakSet=r}(WeakMap)}var _=b.WeakSet,w="object"!==("undefined"==typeof document?"undefined":e(document)),x=function(e){var t,n=(t=(document.defaultView.navigator||{}).userAgent,/(Firefox|Safari)\/(\d+)/.test(t)&&!/(Chrom[eium]+|Android)\/(\d+)/.test(t)),r=!("raw"in e)||e.propertyIsEnumerable("raw")||!Object.isFrozen(e.raw);if(n||r){var o={},i=function(e){for(var t=".",n=0;n<e.length;n++)t+=e[n].length+"."+e[n];return o[t]||(o[t]=e)};if(r)x=i;else{var a=new m;x=function(e){return a.get(e)||function(e,t){return a.set(e,t),t}(e,i(e))}}}else w=!0;return A(e)};function A(e){return w?e:x(e)}
/*! (c) Andrea Giammarchi - ISC */var k,E="-"+Math.random().toFixed(6)+"%",N=!1;try{"content"in(k=document.createElement("template"))&&(k.innerHTML='<p tabindex="'+E+'"></p>',k.content.childNodes[0].getAttribute("tabindex")==E)||(E="_dt: "+E.slice(1,-1)+";",N=!0)}catch(e){}var O="\x3c!--"+E+"--\x3e",S=/^(?:style|textarea)$/i,C=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;
/*! (c) Andrea Giammarchi - ISC */
function j(e){return e.join(O).replace(D,q).replace(L,z)}var T=" \\f\\n\\r\\t",I="[^"+T+"\\/>\"'=]+",R="["+T+"]+"+I,M="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",P="(?:\\s*=\\s*(?:'[^']*?'|\"[^\"]*?\"|<[^>]*?>|"+I.replace("\\/","")+"))?)",L=new RegExp(M+R+P+"+)(["+T+"]*/?>)","g"),D=new RegExp(M+R+P+"*)(["+T+"]*/>)","g"),$=new RegExp("("+R+"\\s*=\\s*)(['\"]?)"+O+"\\2","gi");function z(e,t,n,r){return"<"+t+n.replace($,Z)+r}function Z(e,t,n){return t+(n||'"')+E+(n||'"')}function q(e,t,n){return C.test(t)?e:"<"+t+n+"></"+t+">"}function B(e){for(var t=arguments.length,n=[A(e)],r=1;r<t;)n.push(arguments[r++]);return n}
/*! (c) Andrea Giammarchi - ISC */var F=function(e,t){return(t=n.prototype).ELEMENT_NODE=1,t.nodeType=111,t.remove=function(e){var t=this.childNodes,n=this.firstChild,r=this.lastChild;if(this._=null,e&&2===t.length)r.parentNode.removeChild(r);else{var o=this.ownerDocument.createRange();o.setStartBefore(e?t[1]:n),o.setEndAfter(r),o.deleteContents()}return n},t.valueOf=function(e){var t=this._,n=null==t;if(n&&(t=this._=this.ownerDocument.createDocumentFragment()),n||e)for(var r=this.childNodes,o=0,i=r.length;o<i;o++)t.appendChild(r[o]);return t},n;function n(t){var n=this.childNodes=e.call(t,0);this.firstChild=n[0],this.lastChild=n[n.length-1],this.ownerDocument=n[0].ownerDocument,this._=null}}([].slice),W=Array.isArray,V=F.prototype.nodeType;function H(e,t){this.type=e,this.args=t}
/*! (c) Andrea Giammarchi - ISC */Object.freeze(H);var J=function(e){var t="content"in r("template")?function(e){var t=r("template");return t.innerHTML=e,t.content}:function(e){var t=r("fragment"),o=r("template"),i=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(e)){var a=RegExp.$1;o.innerHTML="<table>"+e+"</table>",i=o.querySelectorAll(a)}else o.innerHTML=e,i=o.childNodes;return n(t,i),t};return function(e,n){return("svg"===n?o:t)(e)};function n(e,t){for(var n=t.length;n--;)e.appendChild(t[0])}function r(t){return"fragment"===t?e.createDocumentFragment():e.createElementNS("http://www.w3.org/1999/xhtml",t)}function o(e){var t=r("fragment"),o=r("div");return o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+e+"</svg>",n(t,o.firstChild.childNodes),t}}(document),G=[].indexOf,Q=function(e,t,n,r,o,i){for(var a=("selectedIndex"in t),c=a;r<o;){var u=e(n[r],1);if(t.insertBefore(u,i),a&&c&&u.selected){c=!c;var s=t.selectedIndex;t.selectedIndex=s<0?r:G.call(t.querySelectorAll("option"),u)}r++}},U=function(e,t){return e==t},K=function(e){return e},X=function(e,t,n,r,o,i,a){var c=i-o;if(c<1)return-1;for(;n-t>=c;){for(var u=t,s=o;u<n&&s<i&&a(e[u],r[s]);)u++,s++;if(s===i)return t;t=u+1}return-1},Y=function(e,t,n,r,o){return n<r?e(t[n],0):0<n?e(t[n-1],-0).nextSibling:o},ee=function(e,t,n,r){for(;n<r;)re(e(t[n++],-1))},te=function(e,t,n){for(var r=1,o=t;r<o;){var i=(r+o)/2>>>0;n<e[i]?o=i:r=i+1}return r},ne=function(e,t,n,r,o,i,a,c,u,s,l,f,d){!function(e,t,n,r,o,i,a,c,u){for(var s=[],l=e.length,f=a,d=0;d<l;)switch(e[d++]){case 0:o++,f++;break;case 1:s.push(r[o]),Q(t,n,r,o++,o,f<c?t(i[f],0):u);break;case-1:f++}for(d=0;d<l;)switch(e[d++]){case 0:a++;break;case-1:-1<s.indexOf(i[a])?a++:ee(t,i,a++,a)}}(function(e,t,n,r,o,i,a){var c,u,s,l,f,d,h,v=n+i,p=[];e:for(c=0;c<=v;c++){if(c>50)return null;for(h=c-1,f=c?p[c-1]:[0,0],d=p[c]=[],u=-c;u<=c;u+=2){for(s=(l=u===-c||u!==c&&f[h+u-1]<f[h+u+1]?f[h+u+1]:f[h+u-1]+1)-u;l<i&&s<n&&a(r[o+l],e[t+s]);)l++,s++;if(l===i&&s===n)break e;d[c+u]=l}}var m=Array(c/2+v/2),g=m.length-1;for(c=p.length-1;c>=0;c--){for(;l>0&&s>0&&a(r[o+l-1],e[t+s-1]);)m[g--]=0,l--,s--;if(!c)break;h=c-1,f=c?p[c-1]:[0,0],(u=l-s)===-c||u!==c&&f[h+u-1]<f[h+u+1]?(s--,m[g--]=1):(l--,m[g--]=-1)}return m}(n,r,i,a,c,s,f)||function(e,t,n,r,o,i,a,c){var u=0,s=r<c?r:c,l=Array(s++),f=Array(s);f[0]=-1;for(var d=1;d<s;d++)f[d]=a;for(var h=o.slice(i,a),v=t;v<n;v++){var p=h.indexOf(e[v]);if(-1<p){var m=p+i;-1<(u=te(f,s,m))&&(f[u]=m,l[u]={newi:v,oldi:m,prev:l[u-1]})}}for(u=--s,--a;f[u]>a;)--u;s=c+r-u;var g=Array(s),y=l[u];for(--n;y;){for(var b=y,_=b.newi,w=b.oldi;n>_;)g[--s]=1,--n;for(;a>w;)g[--s]=-1,--a;g[--s]=0,--n,--a,y=y.prev}for(;n>=t;)g[--s]=1,--n;for(;a>=i;)g[--s]=-1,--a;return g}(n,r,o,i,a,c,u,s),e,t,n,r,a,c,l,d)},re=function(e){return(e.remove||oe).call(e)};function oe(){var e=this.parentNode;e&&e.removeChild(this)}
/*! (c) 2018 Andrea Giammarchi (ISC) */var ie=function(e,t,n,r){r||(r={});for(var o=r.compare||U,i=r.node||K,a=null==r.before?null:i(r.before,0),c=t.length,u=c,s=0,l=n.length,f=0;s<u&&f<l&&o(t[s],n[f]);)s++,f++;for(;s<u&&f<l&&o(t[u-1],n[l-1]);)u--,l--;var d=s===u,h=f===l;if(d&&h)return n;if(d&&f<l)return Q(i,e,n,f,l,Y(i,t,s,c,a)),n;if(h&&s<u)return ee(i,t,s,u),n;var v=u-s,p=l-f,m=-1;if(v<p){if(-1<(m=X(n,f,l,t,s,u,o)))return Q(i,e,n,f,m,i(t[s],0)),Q(i,e,n,m+v,l,Y(i,t,u,c,a)),n}else if(p<v&&-1<(m=X(t,s,u,n,f,l,o)))return ee(i,t,s,m),ee(i,t,m+p,u),n;return v<2||p<2?(Q(i,e,n,f,l,i(t[s],0)),ee(i,t,s,u),n):v===p&&function(e,t,n,r,o,i){for(;r<o&&i(n[r],e[t-1]);)r++,t--;return 0===t}(n,l,t,s,u,o)?(Q(i,e,n,f,l,Y(i,t,u,c,a)),n):(ne(i,e,n,f,l,p,t,s,u,v,c,o,a),n)},ae=function(e,t,n,r,o){var i="importNode"in e,a=e.createDocumentFragment();return a.appendChild(e.createTextNode("g")),a.appendChild(e.createTextNode("")),(i?e.importNode(a,!0):a.cloneNode(!0)).childNodes.length<2?function e(t,n){for(var r=t.cloneNode(),o=t.childNodes||[],i=o.length,a=0;n&&a<i;a++)r.appendChild(e(o[a],n));return r}:i?e.importNode:function(e,t){return e.cloneNode(!!t)}}(document),ce="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")},ue={};
/*! (c) Andrea Giammarchi - ISC */try{ue.Map=Map}catch(e){ue.Map=function(){var e=0,t=[],n=[];return{delete:function(o){var i=r(o);return i&&(t.splice(e,1),n.splice(e,1)),i},forEach:function(e,r){t.forEach((function(t,o){e.call(r,n[o],t,this)}),this)},get:function(t){return r(t)?n[e]:void 0},has:function(e){return r(e)},set:function(o,i){return n[r(o)?e:t.push(o)-1]=i,this}};function r(n){return-1<(e=t.indexOf(n))}}}var se=ue.Map,le=N?function(e,t){var n=t.join(" ");return t.slice.call(e,0).sort((function(e,t){return n.indexOf(e.name)<=n.indexOf(t.name)?-1:1}))}:function(e,t){return t.slice.call(e,0)};function fe(e,t){for(var n=t.length,r=0;r<n;)e=e.childNodes[t[r++]];return e}function de(e,t,n,r){for(var o=new se,i=e.attributes,a=[],c=le(i,n),u=c.length,s=0;s<u;){var l,f=c[s++],d=f.value===E;if(d||1<(l=f.value.split(O)).length){var h=f.name;if(!o.has(h)){var v=n.shift().replace(d?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+h+")\\s*=\\s*('|\")[\\S\\s]*","i"),"$1"),p=i[v]||i[v.toLowerCase()];if(o.set(h,p),d)t.push(ve(p,r,v,null));else{for(var m=l.length-2;m--;)n.shift();t.push(ve(p,r,v,l))}}a.push(f)}}s=0;for(var g=(0<(u=a.length)&&N&&!("ownerSVGElement"in e));s<u;){var y=a[s++];g&&(y.value=""),e.removeAttribute(y.name)}var b=e.nodeName;if(/^script$/i.test(b)){var _=document.createElement(b);for(u=i.length,s=0;s<u;)_.setAttributeNode(i[s++].cloneNode(!0));_.textContent=e.textContent,e.parentNode.replaceChild(_,e)}}function he(e,t){return{type:"any",node:e,path:t}}function ve(e,t,n,r){return{type:"attr",node:e,path:t,name:n,sparse:r}}function pe(e,t){return{type:"text",node:e,path:t}}var me=new m,ge=new m;function ye(e,t){var n=(e.convert||j)(t),r=e.transform;r&&(n=r(n));var o=J(n,e.type);!function(e){var t=e.childNodes,n=t.length;for(;n--;){var r=t[n];1!==r.nodeType&&0===ce.call(r.textContent).length&&e.removeChild(r)}}
/*! (c) Andrea Giammarchi - ISC */(o);var i=[];!function e(t,n,r,o){for(var i=t.childNodes,a=i.length,c=0;c<a;){var u=i[c];switch(u.nodeType){case 1:var s=o.concat(c);de(u,n,r,s),e(u,n,r,s);break;case 8:var l=u.textContent;if(l===E)r.shift(),n.push(S.test(t.nodeName)?pe(t,o):he(u,o.concat(c)));else switch(l.slice(0,2)){case"/*":if("*/"!==l.slice(-2))break;case"ðŸ‘»":t.removeChild(u),c--,a--}break;case 3:S.test(t.nodeName)&&ce.call(u.textContent)===O&&(r.shift(),n.push(pe(t,o)))}c++}}(o,i,t.slice(0),[]);var a={content:o,updates:function(n){for(var r=[],o=i.length,a=0,c=0;a<o;){var u=i[a++],s=fe(n,u.path);switch(u.type){case"any":r.push({fn:e.any(s,[]),sparse:!1});break;case"attr":var l=u.sparse,f=e.attribute(s,u.name,u.node);null===l?r.push({fn:f,sparse:!1}):(c+=l.length-2,r.push({fn:f,sparse:!0,values:l}));break;case"text":r.push({fn:e.text(s),sparse:!1}),s.textContent=""}}return o+=c,function(){var e=arguments.length;if(o!==e-1)throw new Error(e-1+" values instead of "+o+"\n"+t.join("${value}"));for(var i=1,a=1;i<e;){var c=r[i-a];if(c.sparse){var u=c.values,s=u[0],l=1,f=u.length;for(a+=f-2;l<f;)s+=arguments[i++]+u[l++];c.fn(s)}else c.fn(arguments[i++])}return n}}};return me.set(t,a),a}function be(e,t){var n=me.get(t)||ye(e,t),r=ae.call(document,n.content,!0),o={content:r,template:t,updates:n.updates(r)};return ge.set(e,o),o}var _e=function(){var t=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,n=/([^A-Z])([A-Z]+)/g;return function(e,t){return"ownerSVGElement"in e?function(e,t){var n;t?n=t.cloneNode(!0):(e.setAttribute("style","--hyper:style;"),n=e.getAttributeNode("style"));return n.value="",e.setAttributeNode(n),o(n,!0)}(e,t):o(e.style,!1)};function r(e,t,n){return t+"-"+n.toLowerCase()}function o(o,i){var a,c;return function(u){var s,l,f,d;switch(e(u)){case"object":if(u){if("object"===a){if(!i&&c!==u)for(l in c)l in u||(o[l]="")}else i?o.value="":o.cssText="";for(l in s=i?{}:o,u)f="number"!=typeof(d=u[l])||t.test(l)?d:d+"px",!i&&/^--/.test(l)?s.setProperty(l,f):s[l]=f;a="object",i?o.value=function(e){var t,o=[];for(t in e)o.push(t.replace(n,r),":",e[t],";");return o.join("")}(c=s):c=u;break}default:c!=u&&(a="string",c=u,i?o.value=u||"":o.cssText=u||"")}}}}(),we=function(e,t){return e.nodeType===V?1/t<0?t?e.remove(!0):e.lastChild:t?e.valueOf(!0):e.firstChild:e},xe=function(e,t){var n,r=!1,o=t.cloneNode(!0);return function(t){n!==t&&(n=t,o.value!==t&&(null==t?(r&&(r=!1,e.removeAttributeNode(o)),o.value=t):(o.value=t,r||(r=!0,e.setAttributeNode(o)))))}},Ae=function(e,t){var n;return function(r){n!==r&&(n=r,e[t]!==r&&(null==r?(e[t]="",e.removeAttribute(t)):e[t]=r))}},ke=/^(?:form|list)$/i,Ee=[].slice,Ne=function(e,t){return e.ownerDocument.createTextNode(t)};function Oe(e){return this.type=e,t=this,function(e){var n=ge.get(t);return null!=n&&n.template===e||(n=be(t,e)),n.updates.apply(null,arguments),n.content};var t}function Se(e){return e(this)}Oe.prototype={attribute:function(e,t,n){switch(t){case"class":if("ownerSVGElement"in e)return xe(e,n);t="className";case"data":case"props":return Ae(e,t);case"style":return _e(e,n,"ownerSVGElement"in e);case"ref":return function(e){return function(t){t.current=e}}(e);default:return"."===t.slice(0,1)?function(e,t,n){return n?function(n){try{e[t]=n}catch(r){e.setAttribute(t,n)}}:function(n){e[t]=n}}(e,t.slice(1),"ownerSVGElement"in e):"on"===t.slice(0,2)?function(e,t){var n,r=t.slice(2);return t.toLowerCase()in e&&(r=r.toLowerCase()),function(t){n!==t&&(n&&e.removeEventListener(r,n,!1),n=t,t&&e.addEventListener(r,t,!1))}}(e,t):!(t in e)||"ownerSVGElement"in e||ke.test(t)?xe(e,n):Ae(e,t)}},any:function(t,n){var r,o={node:we,before:t},i="ownerSVGElement"in t?"svg":"html",a=!1;return function c(u){switch(e(u)){case"string":case"number":case"boolean":a?r!==u&&(r=u,n[0].textContent=u):(a=!0,r=u,n=ie(t.parentNode,n,[Ne(t,u)],o));break;case"function":c(u(t));break;case"object":case"undefined":if(null==u){a=!1,n=ie(t.parentNode,n,[],o);break}default:if(a=!1,r=u,W(u))if(0===u.length)n.length&&(n=ie(t.parentNode,n,[],o));else switch(e(u[0])){case"string":case"number":case"boolean":c(String(u));break;case"function":c(u.map(Se,t));break;case"object":W(u[0])&&(u=u.concat.apply([],u));default:n=ie(t.parentNode,n,u,o)}else!function(e){return"ELEMENT_NODE"in e}(u)?"text"in u?c(String(u.text)):"any"in u?c(u.any):"html"in u?n=ie(t.parentNode,n,Ee.call(J([].concat(u.html).join(""),i).childNodes),o):"length"in u&&c(Ee.call(u)):n=ie(t.parentNode,n,11===u.nodeType?Ee.call(u.childNodes):[u],o)}}},text:function(t){var n;return function r(o){if(n!==o){n=o;var i=e(o);"object"===i&&o?"text"in o?r(String(o.text)):"any"in o?r(o.any):"html"in o?r([].concat(o.html).join("")):"length"in o&&r(Ee.call(o).join("")):"function"===i?r(o(t)):t.textContent=null==o?"":o}}}};var Ce=Object.create,je=Object.keys,Te=new m,Ie=new m,Re=Oe.prototype,Me=null,Pe=function(e){var t=ze("html",e),n=ze("svg",e),r={html:$e("html",e,!0),svg:$e("svg",e,!0)};return{html:t,svg:n,inner:r,hook:function(e){return{html:De(e,t),svg:De(e,n),inner:r}},render:function(t,n){var r=Ze.call(this,t,n,e);return Ie.get(t)!==r&&(Ie.set(t,r),function(e,t){e.textContent="",e.appendChild(t)}(t,r)),t}}};Pe(Oe);function Le(e,t){return e.nodeType===V?e.valueOf(t):e}function De(e,t){return function(){var n=e(null);return null===n.current&&(n.current=t.for(n)),Le(n.current.apply(null,arguments),!1)}}function $e(e,t,n){return function(){var r=B.apply(null,arguments);return n||Me?new H(e,r):new t(e).apply(null,r)}}function ze(e,t){var n=new m,r=$e(e,t,!1);return r.for=function(r,o){var i=n.get(r)||function(e){var t={$:null};return n.set(e,t),t}(r);return null==o&&(o="$"),i[o]||function(n,r){var o=[],i=null,a=new t(e),c=function(){return a.apply(null,Be(o,1,1,t))};return n[r]=function(){o=B.apply(null,arguments);var e=Ze(a,c,t);return i||(i=Fe(e))}}(i,o)},r}function Ze(e,t,n){var r=Me;(Me=Te.get(e)||function(e){var t={i:0,length:0,stack:[],update:!1};return Te.set(e,t),t}(e)).i=0;var o,i=t.call(this);if(i instanceof H){o=Le(qe(i,0,n),Me.update);var a=Me,c=a.i,u=a.length,s=a.stack,l=a.update;c<u&&s.splice(Me.length=c),l&&(Me.update=!1)}else o=Le(i,!1);return Me=r,o}function qe(e,t,n){var r=Me,o=r.i,i=r.length,a=r.stack,c=e.type,u=e.args,s=o<i;Me.i++,s||(Me.length=a.push({l:t,kind:c,tag:null,tpl:u[0],wire:null})),Be(u,1,t+1,n);var l=a[o];if(s){var f=l.l,d=l.kind,h=l.tag,v=l.tpl,p=l.wire;if(f===t&&c===d&&v===u[0])return h.apply(null,u),p}var m=new n(c),g=Fe(m.apply(null,u));return l.l=t,l.kind=c,l.tag=m,l.tpl=u[0],l.wire=g,o<1&&(Me.update=!0),g}function Be(t,n,r,o){for(var i=t.length;n<i;n++){var a=t[n];"object"===e(a)&&a&&(a instanceof H?t[n]=qe(a,r-1,o):W(a)&&(t[n]=Be(a,0,r++,o)))}return t}function Fe(e){var t=e.childNodes,n=t.length;return 1===n?t[0]:n?new F(t):e}var We=null;try{We=new function(){}}catch(hn){}var Ve=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,e);var t,n=(t=o,function(){var e,n=a(t);if(u()){var r=a(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function o(){return r(this,o),n.apply(this,arguments)}return o}(e)};if(We){var He=Object.getPrototypeOf,Je=Object.setPrototypeOf,Ge=("object"===("undefined"==typeof Reflect?"undefined":e(Reflect))?Reflect:{construct:function(e,t,n){for(var r=[null],o=0;o<t.length;o++)r.push(t[o]);var i=e.bind.apply(e,r);return Je(new i,n.prototype)}}).construct;Ve=function(e,t){function n(){return Ge(t?He(e):e,arguments,n)}return Je(n.prototype,e.prototype),Je(n,e)}}var Qe={map:{},re:null},Ue=function(e){return new RegExp("<(/)?(".concat(e.join("|"),")([^A-Za-z0-9:._-])"),"g")},Ke=null,Xe=function(e,t){var n=Ke||t,r=n.map,o=n.re;return e.replace(o,(function(e,t,n,o){var i=r[n],a=i.tagName,c=i.is;return i.element?t?"</".concat(c,">"):"<".concat(c).concat(o):t?"</".concat(a,">"):"<".concat(a,' is="').concat(c,'"').concat(o)}))},Ye=function(e){var t=e.tagName,n=e.is;return e.element?n:"".concat(t,'[is="').concat(n,'"]')},et=function(){return Ke},tt=function(e){Ke=e},nt=function(e){var t=Ce(Re);return je(e).forEach((function(n){t[n]=e[n](t[n]||("convert"===n?j:String))})),n.prototype=t,Pe(n);function n(){return Oe.apply(this,arguments)}}({transform:function(e){return function(e){return Xe(e,Qe)}}}),rt=nt.render,ot=nt.html,it=nt.svg,at=Object.defineProperties,ct=new m,ut=new m,st=new m,lt=new _,ft="attributeChangedCallback",dt="connectedCallback",ht="dis".concat(dt),vt=function(e,t,n){if(n in e){var r=e[n];t[n]={configurable:!0,value:function(){return Ot.call(this),r.apply(this,arguments)}}}else t[n]={configurable:!0,value:Ot}},pt=function(e){var t=e.prototype,n=[],r={html:{configurable:!0,get:kt},svg:{configurable:!0,get:Et}};r["_ðŸ”¥"]={value:{events:n,info:null}},"handleEvent"in t||(r.handleEvent={configurable:!0,value:Nt}),"oninit"in t&&(n.push("init"),vt(t,r,"render")),vt(t,r,ft),vt(t,r,dt),vt(t,r,ht),[[ft,"onattributechanged",St],[dt,"onconnected",Ct],[ht,"ondisconnected",Tt],[dt,"render",jt]].forEach((function(e){var o=f(e,3),i=o[0],a=o[1],c=o[2];if(!(i in t)&&a in t)if("render"!==a&&n.push(a.slice(2)),i in r){var u=r[i].value;r[i]={configurable:!0,value:function(){return u.apply(this,arguments),c.apply(this,arguments)}}}else r[i]={configurable:!0,value:c}}));var o=e.booleanAttributes||[];o.forEach((function(e){e in t||(r[e]={configurable:!0,get:function(){return this.hasAttribute(e)},set:function(t){t&&"false"!==t?this.setAttribute(e,t):this.removeAttribute(e)}})}));var i=e.observedAttributes||[];i.forEach((function(e){e in t||(r[e]={configurable:!0,get:function(){return this.getAttribute(e)},set:function(t){null==t?this.removeAttribute(e):this.setAttribute(e,t)}})})),(e.mappedAttributes||[]).forEach((function(e){var o=new m,i="on"+e in t;i&&n.push(e),r[e]={configurable:!0,get:function(){return o.get(this)},set:function(t){if(o.set(this,t),i){var n=mt(e);n.detail=t,lt.has(this)?this.dispatchEvent(n):(st.has(this)||st.set(this,[]),st.get(this).push(n))}}}})),at(t,r);var a=o.concat(i);return a.length?at(e,{observedAttributes:{configurable:!0,get:function(){return a}}}):e},mt=function(e){return new y(e)},gt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new H("html",t)};gt.for=ot.for;var yt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new H("svg",t)};yt.for=it.for;var bt=function(e,t,n){var r=n.info,o=r?Xe(t.join("_ðŸ”¥"),r).split("_ðŸ”¥"):t;return e.set(t,o),o},_t=function(e,t,n){var r=wt(e,t,new m);return n.set(e,r),r},wt=function(e,t,n){return function(r){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var c=A(r),u=n.get(c)||bt(n,c,e["_ðŸ”¥"]);return rt(e,(function(){return t.apply(void 0,[u].concat(i))}))}};function xt(e){this.addEventListener(e,this)}function At(e){this.dispatchEvent(e)}function kt(){return ct.get(this)||_t(this,gt,ct)}function Et(){return ut.get(this)||_t(this,yt,ut)}function Nt(e){this["on".concat(e.type)](e)}function Ot(){if(!lt.has(this)){lt.add(this),this["_ðŸ”¥"].events.forEach(xt,this),this.dispatchEvent(mt("init"));var e=st.get(this);e&&(st.delete(this),e.forEach(At,this))}}function St(e,t,n){var r=mt("attributechanged");r.attributeName=e,r.oldValue=t,r.newValue=n,this.dispatchEvent(r)}function Ct(){this.dispatchEvent(mt("connected"))}function jt(){this.render()}function Tt(){this.dispatchEvent(mt("disconnected"))}var It=Object.create,Rt=Object.defineProperty,Mt=Object.defineProperties,Pt=Object.getOwnPropertyNames,Lt=Object.getOwnPropertySymbols,Dt=Object.getOwnPropertyDescriptor,$t=Object.keys,zt={element:HTMLElement},Zt=new m,qt=new m,Bt=function(e){var t=It(null),n=It(null),r={prototype:n,statics:t};return Pt(e).concat(Lt(e)).forEach((function(r){var o=Dt(e,r);switch(o.enumerable=!1,r){case"extends":r="tagName";case"contains":case"includes":case"name":case"booleanAttributes":case"mappedAttributes":case"observedAttributes":case"style":case"tagName":t[r]=o;break;default:n[r]=o}})),r},Ft=function(e,t){return e?e[t]||(e[t]={current:null}):{current:null}},Wt=function(t,n,r){var o;if(!/^([A-Z][A-Za-z0-9_]*)(<([A-Za-z0-9:._-]+)>|:([A-Za-z0-9:._-]+))?$/.test(t))throw"Invalid name";var i=RegExp.$1,a=RegExp.$3,c=RegExp.$4,u=a||c||n.tagName||n.extends||"element";if(!/^[A-Za-z0-9:._-]+$/.test(u))throw"Invalid tag";var s,l="",f="";u.indexOf("-")<0?(l=i.replace(/([A-Z])([A-Z][a-z])/g,s="$1"+(s||"-")+"$2").replace(/([a-z])([A-Z])/g,s).toLowerCase()+r).indexOf("-")<0&&(f="-heresy"):(l=u+r,u="element");var d=l+f;if(customElements.get(d))throw"Duplicated ".concat(d," definition");var h=Ve("object"===e(n)?qt.get(n)||function(e,t){var n=Bt(e),r=n.statics,o=n.prototype,i=Ve(zt[t]||(zt[t]=document.createElement(t).constructor),!1);return Mt(i.prototype,o),Mt(i,r),qt.set(e,pt(i)),i}(n,u):Zt.get(n)||function(e){var t=Ve(e,!1);return Zt.set(e,pt(t)),t}(n),!0),v="element"===u;if(Rt(h,"new",{value:v?function(){return document.createElement(d)}:function(){return document.createElement(u,{is:d})}}),Rt(h.prototype,"is",{value:d}),""===r){var p=function(e){for(var t=e.length,n=0,r=0;r<t;)n=(n<<5)-n+e.charCodeAt(r++),n&=n;return n.toString(36)}(l.toUpperCase());Qe.map[i]=Vt(h,u,d,{id:p,i:0}),Qe.re=Ue($t(Qe.map))}var m=[d,h];return v||m.push({extends:u}),(o=customElements).define.apply(o,m),{Class:h,is:d,name:i,tagName:u}},Vt=function e(t,n,r,o){var i=t.prototype,a=function(e,t){return{tagName:e,is:t,element:"element"===e}}(n,r),c=[Ye(a)],u=t.includes||t.contains;if(u){var s={};$t(u).forEach((function(t){var n="-".concat(o.id,"-").concat(o.i++),r=Wt(t,u[t],n),i=r.Class,a=r.is,l=r.name,f=r.tagName;c.push(Ye(s[l]=e(i,f,a,o)))}));var l=Ue($t(s)),f={events:i["_ðŸ”¥"].events,info:{map:s,re:l}};if(Rt(i,"_ðŸ”¥",{value:f}),"render"in i){var d=i.render,h=f.info;Rt(i,"render",{value:function(){var e=et();tt(h);var t=d.apply(this,arguments);return tt(e),t}})}}return"style"in t&&function(e){if((e||"").length){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e));var n=document.head||document.querySelector("head");n.insertBefore(t,n.lastChild)}}(t.style.apply(t,c)),a};function Ht(){var e=l(['\n      <h1>todos</h1>\n      <input class="new-todo" placeholder="What needs to be done?" autofocus>\n    ']);return Ht=function(){return e},e}function Jt(){var e=l(['\n    <div class="view">\n      <input\n        class="toggle" type="checkbox"\n        checked=',"\n      >\n      <label>",'</label>\n      <button class="destroy" onclick=',"></button>\n    </div>"]);return Jt=function(){return e},e}function Gt(){var e=l(["<Item ondelete="," .value=","/>"]);return Gt=function(){return e},e}function Qt(){var e=l(["",""]);return Qt=function(){return e},e}function Ut(){var e=l(['\n      <input id="toggle-all" class="toggle-all" type="checkbox">\n      <label for="toggle-all">Mark all as complete</label>\n      <List\n        class="todo-list"\n        ref=',"\n        .items=","\n      />\n    "]);return Ut=function(){return e},e}function Kt(){var e=l(['\n      <span class="todo-count">','</span>\n      <ul class="filters">\n        <li>\n          <a href="#/" class="all selected">All</a>\n        </li>\n        <li>\n          <a href="#/active" class="active">Active</a>\n        </li>\n        <li>\n          <a href="#/completed" class="completed">Completed</a>\n        </li>\n      </ul>\n      <button class="clear-completed">Clear completed</button>\n    ']);return Kt=function(){return e},e}function Xt(){var e=l(['\n      <Header class="header" ref='," onchange=",'/>\n      <Main class="main" ref='," onchange="," ondelete="," .data=",'/>\n      <Footer class="footer" ref='," count="," onclick=","/>\n    "]);return Xt=function(){return e},e}var Yt={extends:"section",includes:{Header:{extends:"header",render:function(){this.html(Ht())}},Main:{extends:"section",includes:{List:{extends:"ul",includes:{Item:{extends:"li",mappedAttributes:["value"],onvalue:function(){this.render()},onclick:function(e){e.stopPropagation(),this.dispatchEvent(new CustomEvent("delete",{bubbles:!0,detail:{id:this.value.id}}))},render:function(){var e=this.value,t=e.checked,n=e.text;this.classList.toggle("completed",t),this.html(Jt(),t,n,this)}}},mappedAttributes:["items"],onitems:function(){this.render()},render:function(){var e=this,t=this.items;this.html(Qt(),Object.keys(t).map((function(n){return gt(Gt(),e,t[n])})))}}},mappedAttributes:["data"],ondata:function(){this.render()},getActiveItems:function(){var e=this.data.items;return Object.keys(e).reduce((function(t,n){return e[n].checked||(t[n]=e[n]),t}),{})},getCompletedItems:function(){var e=this.data.items;return Object.keys(e).reduce((function(t,n){return e[n].checked&&(t[n]=e[n]),t}),{})},render:function(){var e=this.data,t=e.displayActive,n=e.displayCompleted,r=e.displayAll,o={};t?o=this.getActiveItems():n?o=this.getCompletedItems():r&&(o=this.data.items),this.html(Ut(),Ft(this,"list"),o)}},Footer:{extends:"footer",mappedAttributes:["count"],oncount:function(){this.render()},render:function(){this.html(Kt(),this.count)}}},mappedAttributes:["data"],ondata:function(){this.render()},style:function(e){return"\n    ".concat(e," ul.completed > li:not(.completed),\n    ").concat(e," ul.active > li.completed {\n      display: none;\n    }\n  ")},oninit:function(){this.header=Ft(),this.main=Ft(),this.footer=Ft()},render:function(){var e,t=(e=this.data.items,Object.keys(e).filter((function(t){return!e[t].checked})).length);this.html(Xt(),this.header,this,this.main,this,this,this.data,this.footer,t,this)},onchange:function(e){var t=e.currentTarget,n=e.target;switch(t){case this.header.current:var r=n.value.trim();this.intents.createTodo(r),n.value="";break;case this.main.current:if("toggle-all"===n.className)this.intents.markAllDone(n.checked);else{var o=n.closest("li").value;this.intents.markDone(o.id,n.checked)}}},ondelete:function(e){var t=e.detail.id;this.intents.deleteTodo(t)},onclick:function(e){var t=e.currentTarget,n=e.target;switch(t){case this.footer.current:"clear-completed"===n.className?this.intents.clearCompleted():n.hash&&!n.classList.contains("selected")&&(t.querySelector("a.selected").classList.remove("selected"),n.classList.add("selected"),n.classList.contains("active")?this.intents.showActive():n.classList.contains("completed")?this.intents.showCompleted():n.classList.contains("all")&&this.intents.showAll())}}};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var en=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(t,o){t.exports=function(){var t=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&"object"===e(t)?t:n},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&Array.isArray(e)?e:t},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number.isNaN(e)?t:e},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 0===e||Number.isNaN(e)?0===t?1:t:e},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};return e||t},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e[0]},l=function(e,t){return e||t},h=function(e,t){return e&&t},v=function(e,t){return function(n){return e(t(n))}},p=function e(t){return Array.isArray(t)?t.map(e).reduce(h,!0):!0===t||null!=t},m=function(t,n){return p(t)&&p(n)?function(t,n){switch(e(t)){case"string":return"string"==typeof n&&t.includes(n);case"object":return Array.isArray(t)?t.includes(n):"string"==typeof n&&p(t[n])}return t===n}(t,n):p(t)},g=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return p(e)&&n&&t(e),b(p(e))},y=function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return p(t)&&r&&n(t),{on:e}},b=function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{oneOf:t?function(){return e()}:g}},_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.currentIndex=0,this.history=t,this.max=n.max}return i(e,[{key:"snap",value:function(e,t){var n=function e(t){var n=t.__components;delete t.__components;var r=JSON.parse(JSON.stringify(t));return n&&(r.__components=[],n.length>0&&n.forEach((function(t){delete t.parent,r.__components.push(Object.assign(e(t),{parent:r}))}))),r}(e);return t?this.history[t]=n:(this.history.push(n),this.max&&this.history.length>this.max&&this.history.shift()),e}},{key:"travel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentIndex=e,this.history[e]}},{key:"next",value:function(){return this.history[this.currentIndex++]}},{key:"hasNext",value:function(){return m(this.history[this.currentIndex])}},{key:"last",value:function(){return this.currentIndex=this.history.length-1,this.history[this.currentIndex]}}]),e}(),w={},x={on:function(e,t){m(w[e])||(w[e]=[]),w[e].push(t)},off:function(e,t){o(w[e]).forEach((function(n,r){n===t&&w[e].splice(r,1)}))},emit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;Array.isArray(e)?e.forEach((function(e){return o(w[e]).forEach((function(e){return e(t)}))})):o(w[e]).forEach((function(e){return e(t)}))}},A=function(){function e(t){r(this,e),this.__components={},this.__behavior=[],this.__name=t,this.__lastProposalTimestamp=0,this.__allowedActions=[],this.__eventQueue=[]}return i(e,[{key:"localState",value:function(e){return m(e)?this.__components[e]:{}}},{key:"hasError",value:function(){return m(this.__error)}},{key:"error",value:function(){return this.__error||void 0}},{key:"errorMessage",value:function(){return t(this.__error).message}},{key:"clearError",value:function(){return delete this.__error}},{key:"allowedActions",value:function(){return this.__allowedActions}},{key:"clearAllowedActions",value:function(){this.__allowedActions=[]}},{key:"addAllowedActions",value:function(e){this.__allowedActions.push(e)}},{key:"resetBehavior",value:function(){this.__behavior=[]}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,e)}},{key:"setComponentState",value:function(e){this.__components[e.name]=Object.assign(t(e.localState),{parent:this}),e.localState=e.localState||this.__components[e.name]}},{key:"hasNext",value:function(e){return m(e)&&(this.__hasNext=e),this.__hasNext}},{key:"continue",value:function(){return!0===this.__continue}},{key:"renderNextTime",value:function(){delete this.__continue}},{key:"doNotRender",value:function(){this.__continue=!0}},{key:"setLogger",value:function(e){this.__logger=e}},{key:"log",value:function(e){var t=e.trace,n=e.info,r=e.warning,o=e.error,i=e.fatal;this.logger&&g(t,this.logger.trace(t)).oneOf(n,this.logger.info(n)).oneOf(r,this.logger.waring(r)).oneOf(o,this.logger.error(r)).oneOf(i,this.logger.fatal(r))}},{key:"prepareEvent",value:function(e,t){this.__eventQueue.push([e,t])}},{key:"resetEventQueue",value:function(){this.__eventQueue=[]}},{key:"flush",value:function(){!1===this.continue()&&(o(this.__eventQueue).forEach((function(e){var t=f(e,2),n=t[0],r=t[1];return x.emit(n,r)})),this.__eventQueue=[])}},{key:"clone",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n=t.__components;delete t.__components;var r=JSON.parse(JSON.stringify(t));return n&&(r.__components={},Object.keys(n).forEach((function(t){var o=n[t];delete o.parent,r.__components[t]=Object.assign(e.clone(o),{parent:r})}))),r}},{key:"state",value:function(e,t){var n,r=this,o=function(e){return m(r[e])?r[e]:m(r.__components[e])?r.__components[e]:r};return n=Array.isArray(e)?e.map((function(e){return o(e)})):o(e),t&&n?this.clone(n):n}}]),e}(),k=function(e,t){return t?JSON.stringify(e,null,4):JSON.stringify(e)},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object.keys(e);return"".concat(n.map((function(n){return"string"!=typeof n||0===n.indexOf("__")?"":k(e[n],t)})).filter((function(e){return""!==e})).join(", "))},N=function(e){return e()},O=function(e){return function(){var t=n(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function S(){var e,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=t(i.timetravel),s=u.max,h=i.hasAsyncActions,p=void 0===h||h,g=i.instanceName,b=void 0===g?"global":g,w=i.synchronize,k=void 0!==w&&w,S=i.clone,C=void 0!==S&&S,j=(i.requestStateRepresentation,t(k)),T=j.synchronizeInterval,I=void 0===T?5:T,R=new A(b),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R;return t.map((function(t){return e.push(t(n))}))},P=[function(e){var t=e.__error;t&&(t.stack.indexOf("AssertionError")<0?R.__error=t:(console.log("--------------------------------------"),console.log(t)))}],L=[function(){R.hasNext(!!e&&e.hasNext())}],D=[],$=function(e){return e.flush()},z=function(e){return e.flush()},Z=z,q=function(){try{L.forEach(N),D.map(N).reduce(l,!1)||$(C?R.clone():R),R.renderNextTime()}catch(e){if(!(e.stack.indexOf("AssertionError")<0))throw e;setTimeout((function(){return V({__error:e})}),0)}},B=function(e){if(m(e.__name)){var t=e.__name;delete e.__name;var n=R.__formatBehavior?R.__formatBehavior(t,e,R):"".concat(t,"(").concat(E(e),") ==> ").concat(E(R));R.__behavior.push(n)}},F=function(e){if(e.__startTime){if(e.__startTime<=R.__lastProposalTimestamp)return!1;e.__startTime=R.__lastProposalTimestamp}return!0},W={_queue:[],_rendering:!1,add:function(e){this._queue.push(e)},synchronize:function(e){var t=this;return this._interval=setInterval(n(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t._rendering||!(t._queue.length>0)){n.next=8;break}return t._rendering=!0,r=t._queue.slice(0,1),o=f(r,1),i=o[0],t._queue.shift(),i.__rendering=t._rendering,n.next=7,e.apply(void 0,d(i));case 7:t._rendering=!1;case 8:case"end":return n.stop()}}),n)}))),I),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return W.add(t)}},clear:function(){clearInterval(this._interval)}},V=k?function(){var e=n(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(t)){e.next=13;break}return R.resetEventQueue(),e.t0=Promise,e.t1=P,e.next=6,O(t);case 6:return e.t2=e.sent,e.t3=e.t1.map.call(e.t1,e.t2),e.next=10,e.t0.all.call(e.t0,e.t3);case 10:B(t),q(),n&&n();case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}():function(e,t){F(e)&&(P.forEach(O(e)),B(e),q(),t&&t())};k&&(V=W.synchronize(V));var H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R.update(t),e&&e.snap(R,0),R.resetBehavior()},J=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return function(n){return function(){return!!t.expression(n)&&(n.log({error:{name:t.name,model:n}}),e&&(n.update(e.last()),$(n)),!0)}}}))},G=function(e){return 0===R.allowedActions().length||R.allowedActions().map((function(t){return t===e})).reduce(l,!1)},Q=function(e){m(e.name)&&R.setComponentState(e)},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.options||{},u=i.ignoreOutdatedProposals,s=void 0!==u&&u,l=i.debounce,f=void 0===l?0:l,d=i.retry;d&&(d.max=c(d.max),d.delay=a(d.delay));var h=f;Q(e),r=p?o(e.actions).map((function(e){var r=!1,o=0,i=function(){var a=n(regeneratorRuntime.mark((function n(){var a,c,u,l,f,v=arguments;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(a=v.length,c=new Array(a),u=0;u<a;u++)c[u]=v[u];if(l=(new Date).getTime(),!G(e)){n.next=38;break}if(!(h>0&&r)){n.next=6;break}return r=!t(c[0]).__resetDebounce,n.abrupt("return");case 6:return f={},n.prev=7,n.next=10,e.apply(void 0,c);case 10:f=n.sent,n.next=24;break;case 13:if(n.prev=13,n.t0=n.catch(7),!d){n.next=19;break}return(o+=1)<d.max&&setTimeout((function(){return i.apply(void 0,c)}),d.delay),n.abrupt("return");case 19:if(!(n.t0.stack.indexOf("AssertionError")<0)){n.next=23;break}f.__error=n.t0,n.next=24;break;case 23:throw n.t0;case 24:s&&(f.__startTime=l),n.prev=25,V(f),o=0,n.next=37;break;case 30:if(n.prev=30,n.t1=n.catch(25),!(n.t1.stack.indexOf("AssertionError")<0)){n.next=36;break}V({__error:n.t1}),n.next=37;break;case 36:throw n.t1;case 37:h>0&&(r=!0,setTimeout((function(){return i({__resetDebounce:!0})}),h));case 38:case"end":return n.stop()}}),n,null,[[7,13],[25,30]])})));return function(){return a.apply(this,arguments)}}();return i})):o(e.actions).map((function(e){return function(){try{var t=e.apply(void 0,arguments);V(t)}catch(e){if(!(e.stack.indexOf("AssertionError")<0))throw e;V({__error:e})}}})),M(P,e.acceptors,e.localState),M(L,e.reactors,e.localState),M(D,J(e.safety),e.localState),M(D,e.naps,e.localState)},K=function(t){var n=function(e){e.flush&&e.flush(),t&&t(e)};$=e?v(n,(function(t){return e?e.snap(t):t})):n,z=t},X=function(e){R.setLogger(e)},Y=function(t){e=new _(t,{max:s}),R.hasNext(e.hasNext()),R.resetBehavior(),$=v(z,(function(t){return e?e.snap(t):t}))},ee=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};m(e)&&(t.reset&&(t.index=0,R.__behavior=[]),n=t.next?e.next():t.endOfTime?e.last():e.travel(t.index)),$(Object.assign(R,n))},te=function(e){var t=e.begin,n=void 0===t?{}:t,r=e.end,o=n.render;m(o)&&(Z=$,$=o),m(r)&&($=Z)},ne=function(e){var t=e.actions,n=void 0===t?[]:t,r=e.clear,o=void 0!==r&&r;return n.length>0?R.addAllowedActions(n):o&&R.clearAllowedActions(),R.allowedActions()},re=function(e){var t=f(e,2),n=t[0],r=t[1];return x.on(n,r)};return function(e){var t=e.initialState,n=e.component,o=e.render,i=e.history,a=e.travel,c=e.logger,u=e.check,s=e.allowed,l=e.clearInterval,f=e.event;return r=[],y(i,Y).on(t,H).on(n,U).on(o,K).on(a,ee).on(c,X).on(u,te).on(s,ne).on(l,(function(){return W.clear()})).on(f,re),{hasNext:R.hasNext(),hasError:R.hasError(),errorMessage:R.errorMessage(),error:R.error(),intents:r,state:function(e){return R.state(e,C)}}}}var C=S(),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return{addInitialState:function(t){return e({initialState:t})},addComponent:function(t){return e({component:t})},setRender:function(t){if(Array.isArray(t)){var n=f(t,2),r=n[0],o=n[1];t=function(e){return r("function"==typeof o?o(e):e)}}e({render:u(t)})},addHandler:function(t,n){return e({event:[t,n]})},getIntents:function(t){return e({component:{actions:t}})},addAcceptors:function(t,n){return e({component:{acceptors:t,privateModel:n}})},addReactors:function(t,n){return e({component:{reactors:t,privateModel:n}})},addNAPs:function(t,n){return e({component:{naps:t,privateModel:n}})},addSafetyConditions:function(t,n){return e({component:{safety:t,privateModel:n}})},hasError:function(){return e({}).hasError},allow:function(t){return e({allowed:{actions:t}})},clearAllowedActions:function(){return e({allowed:{clear:!0}})},allowedActions:function(){return e({allowed:{}})},addTimeTraveler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e({history:t})},travel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e({travel:{index:t}})},next:function(){return e({travel:{next:!0}})},last:function(){return e({travel:{endOfTime:!0}})},hasNext:function(){return e({}).hasNext},reset:function(t){return e(t?{initialState:t}:{travel:{reset:!0}})},beginCheck:function(t){return e({check:{begin:{render:t}}})},endCheck:function(){return e({check:{end:!0}})}}},T=function e(t,n,r,o,i,a){var c=[];return 0===n.length?t.forEach((function(e){a.length>0?a.map((function(t){return e.name!==t})).reduce(h,!0)&&c.push([e]):c.push([e])})):n.forEach((function(e){return t.forEach((function(t){var n=e.concat([t]);i?e[e.length-1]!==t&&c.push(n):c.push(n)}))})),++r<o?e(t,c,r,o,i,a):c.filter((function(e){return e.length===o}))},I=function(e){var n=e.map((function(e){return o(t(e).values).length})),r=n.map((function(e,t){for(var r=1,o=t;o<n.length;o++)r*=n[o];return r})),i=n.reduce((function(e,t){return e*t}),1);if(0===i)throw new Error(["Checker: invalid dataset, one of the intents values has no value.","If an intent has no parameter, add an empty array to its values"].join("\n"));return{increment:function(e){return r.map((function(t,o){return o===r.length-1?e%n[o]:Math.floor(e/r[o+1])%n[o]}))},kmax:i}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;e.forEach((function(e){var r=0,o=I(e),i=o.increment,a=o.kmax,c=function(){var o=i(r++),a=e.map((function(e,t){return e.values[o[t]]}));t(),n([]),e.forEach((function(e,t){return e.intent.apply(e,d(a[t]))}))};do{c()}while(r<a)}))},M=j(),P=M.addInitialState,L=M.addComponent,D=M.setRender,$=M.addSafetyConditions,z=M.getIntents,Z=M.addAcceptors,q=M.addReactors,B=M.addNAPs;return{SAM:C,createInstance:S,api:j,addInitialState:P,addComponent:L,addAcceptors:Z,addReactors:q,addNAPs:B,addSafetyConditions:$,getIntents:z,setRender:D,step:function(){return{}},doNotRender:function(e){return function(){return!0===e.continue()}},first:s,match:function(e,t){return s(e.map((function(e,n){return e?t[n]:null})).filter(p))},on:y,oneOf:g,utils:{O:t,A:o,N:a,NZ:c,S:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e&&"string"==typeof e?e:t},F:u,E:m,or:l,and:h,log:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];console.log(n),e.apply(void 0,n)}}},events:{on:x.on,off:x.off,emit:x.emit},checker:function(e){var t=e.instance,n=e.initialState,r=void 0===n?{}:n,o=e.intents,i=void 0===o?[]:o,a=e.reset,c=e.liveness,u=e.safety,s=e.options,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null},h=j(t),v=h.beginCheck,p=h.endCheck,g=s.depthMax,y=void 0===g?5:g,b=s.noDuplicateAction,_=void 0!==b&&b,w=s.doNotStartWith,x=void 0===w?[]:w,A=s.format,k=f(t({component:{actions:[function(e){return{__behavior:e}},function(e){return{__setFormatBehavior:e}}],acceptors:[function(e){return function(t){var n=t.__behavior;m(n)&&(e.__behavior=n)}},function(e){return function(t){var n=t.__setFormatBehavior;m(n)&&(e.__formatBehavior=n)}}]}}).intents,2),E=k[0],N=k[1];N(A);var O=[];return v((function(e){c&&c(e)&&(O.push({liveness:e.__behavior}),l(e.__behavior)),u&&u(e)&&(O.push({safety:e.__behavior}),d(e.__behavior))})),R(T(i,[],0,y,_,x),(function(){return a(r)}),E),p(),O}}}()})),tn=en.createInstance,nn=en.api,rn=Object.create(null),on=function(e){return rn[e]||function(e){return addEventListener("beforeunload",{name:e,handleEvent:cn},!1),rn[e]=JSON.parse(localStorage.getItem(e)||"{}")}(e)},an=function(e){var t=on(e);return t.id||(t.id=0,t.items={}),t};function cn(){var e=this.name;localStorage.setItem(e,JSON.stringify(rn[e]))}var un={actions:[function(e){return{todo:e}}],acceptors:[function(e){return function(t){if(t.todo){var n=e.id+1;e.items[n]={text:t.todo,checked:!1,id:n},e.id=n,function(e,t){rn[e]=t}(":todo-heresy",{id:e.id,items:e.items})}return e}}]},sn={actions:[function(){return{cached:an(":todo-heresy")}}],acceptors:[function(e){return function(t){if(t.cached){var n=t.cached,r=n.id,o=n.items,i=void 0===o?{}:o;e.id=r,e.items=i}return e}}]},ln={actions:[function(e,t){return{id:e,checked:t}},function(e){return{all:!0,checked:e}},function(e){return{deleteTodo:!0,id:e}}],acceptors:[function(e){return function(t){var n=e.getItems(),r=t.id,o=t.checked,i=t.all,a=t.deleteTodo;return r&&n[r]&&(n[r].checked=o),i&&Object.keys(n).forEach((function(e){n[e].checked=o})),r&&a&&Object.keys(n).forEach((function(e){n[e].id===r&&delete n[e]})),e}}]},fn={actions:[function(){return{clearCompleted:!0}},function(){return{showActive:!0}},function(){return{showCompleted:!0}},function(){return{showAll:!0}}],acceptors:[function(e){return function(t){var n=t.clearCompleted,r=t.showActive,o=t.showCompleted,i=t.showAll,a=e.getItems();return n?Object.keys(a).forEach((function(e){a[e].checked&&delete a[e]})):r?(e.displayActive=!0,e.displayCompleted=!1,e.displayAll=!1):o?(e.displayActive=!1,e.displayCompleted=!0,e.displayAll=!1):i&&(e.displayAll=!0,e.displayActive=!1,e.displayCompleted=!1),e}}]},dn=nn(tn());dn.addInitialState({items:[],displayActive:!1,displayCompleted:!1,displayAll:!0,getItems:function(){return this.items}});var hn,vn,pn=f(dn.addComponent(un).intents,1)[0],mn=f(dn.addComponent(sn).intents,1)[0],gn=f(dn.addComponent(ln).intents,3),yn=gn[0],bn=gn[1],_n=gn[2],wn=f(dn.addComponent(fn).intents,4),xn=dn,An={startApplication:mn,createTodo:pn,markDone:yn,markAllDone:bn,clearCompleted:wn[0],showActive:wn[1],showCompleted:wn[2],showAll:wn[3],deleteTodo:_n};function kn(){var e=l(["<Todo .data="," .intents="," />"]);return kn=function(){return e},e}vn=Yt,("string"==typeof(hn="Todo")?Wt(hn,vn,""):Wt(hn.name,hn,"")).Class;xn.setRender((function(e){var t,n,r=document.querySelector("#todo-app");t=r,n=gt(kn(),e,An),rt(t,"function"==typeof n?n:function(){return n})})),An.startApplication()}();
